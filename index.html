<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>awaiting 2.2.0 | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='assets/style.css' type='text/css' rel='stylesheet' />
  <link href='assets/github.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation'>
  <div class='max-width-4 mx-auto'>
    <div class='clearfix md-mxn2'>
      <div class='fixed xs-hide fix-3 overflow-auto max-height-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>awaiting</h3>
          <div class='mb1'><code>2.2.0</code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#awaiting'
                  class="">
                  awaiting
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#errorlist'
                  class="">
                  ErrorList
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#delay'
                  class="">
                  delay
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#time'
                  class="">
                  time
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#limit'
                  class="">
                  limit
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#event'
                  class="">
                  event
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#callback'
                  class="">
                  callback
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#awaited'
                  class="">
                  awaited
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#single'
                  class="">
                  single
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#set'
                  class="">
                  set
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#list'
                  class="">
                  list
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#object'
                  class="">
                  object
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#map'
                  class="">
                  map
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#failure'
                  class="">
                  failure
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#success'
                  class="">
                  success
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#result'
                  class="">
                  result
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#throw'
                  class="">
                  throw
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#swallow'
                  class="">
                  swallow
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='http://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div class='fix-margin-3'>
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='awaiting'>
      awaiting
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L31-L50'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>The async/await utility for browsers and Node.js.</p>
<p>(
<a href="https://github.com/hunterloftis/awaiting#examples">examples</a> -
<a href="https://github.com/hunterloftis/awaiting">github</a> -
<a href="https://www.npmjs.com/package/awaiting">npm</a> -
<a href="https://github.com/hunterloftis/awaiting/issues">suggestions / bug reports</a> -
<a href="https://github.com/hunterloftis/awaiting#installation">installation</a> -
<a href="https://github.com/hunterloftis/awaiting#motivation">motivation</a>
)</p>
<p><strong><code>$ yarn add awaiting</code></strong></p>
<p><strong><code>$ npm install awaiting --save</code></strong></p>
<p><strong><code>&#x3C;script src='awaiting.js'></code></strong></p>
<p><a href="https://travis-ci.org/hunterloftis/awaiting"><img src="https://travis-ci.org/hunterloftis/awaiting.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/r/hunterloftis/awaiting?branch=master"><img src="https://coveralls.io/repos/hunterloftis/awaiting/badge.svg?branch=master" alt="Coverage Status"></a></p>


  <div class='pre p1 fill-light mt0'>awaiting</div>
  
  

  
  <div>License: MIT</div>
  
  
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> a = <span class="hljs-built_in">require</span>(<span class="hljs-string">'awaiting'</span>)
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">await</span> a.delay(<span class="hljs-number">1000</span>)</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='errorlist'>
      ErrorList
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L80-L88'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Iterable Error type</p>
<p>Functions that operate on lists throw ErrorLists,
making it possible to inspect all of the Errors that may have been thrown.</p>


  <div class='pre p1 fill-light mt0'>new ErrorList(message: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): iterable&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a>></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>message</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    top-level Error message

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>iterable&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a>></code>:
        

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> err = <span class="hljs-keyword">new</span> ErrorList(<span class="hljs-string">'several errors'</span>)
err.add(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'first'</span>))
err.add(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'second'</span>))
<span class="hljs-built_in">console</span>.log(err.message, err.get(<span class="hljs-number">1</span>).message)
<span class="hljs-comment">// =&gt; several errors second</span></pre>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> a.list([ failing1, failing2, failing3 ])
}
<span class="hljs-keyword">catch</span> (errorList) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> err <span class="hljs-keyword">of</span> errorList) {
    <span class="hljs-built_in">console</span>.error(err.stack)
  }
}</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='delay'>
      delay
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L117-L121'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for <code>ms</code> milliseconds to pass.</p>


  <div class='pre p1 fill-light mt0'>delay(ms: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>ms</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    the number of milliseconds to wait

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></code>:
        

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> start = <span class="hljs-built_in">Date</span>.now()
<span class="hljs-keyword">await</span> a.delay(<span class="hljs-number">5000</span>)
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Date</span>.now() - start)
<span class="hljs-comment">// =&gt; 5000</span></pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='time'>
      time
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L134-L137'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for <code>date</code>.</p>


  <div class='pre p1 fill-light mt0'>time(date: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">date</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>date</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">date</a>)</code>
	    the date at which to stop waiting

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></code>:
        

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> nextYear = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2018</span>, <span class="hljs-number">1</span>)
<span class="hljs-keyword">await</span> a.time(nextYear)
<span class="hljs-comment">// =&gt; this will run until the end of 2017</span></pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='limit'>
      limit
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L152-L182'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for the value of <code>goal</code>, limited by the resolution of <code>limiter</code>.
Throws an Error if <code>limiter</code> finishes first or if either throws early.
If <code>limiter</code> is a number, limits by time in milliseconds</p>


  <div class='pre p1 fill-light mt0'>limit(goal: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>, limiter: (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>)): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>goal</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>)</code>
	    the promise to execute

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>limiter</span> <code class='quiet'>((<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>))</code>
	    milliseconds or promise to limit by

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></code>:
        

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">// throw if flowers.jpg can't be retrieved in &lt; 5 seconds</span>
<span class="hljs-keyword">await</span> a.limit(fetch(<span class="hljs-string">'flowers.jpg'</span>), <span class="hljs-number">5000</span>)</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='event'>
      event
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L194-L200'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for <code>emitter</code> to emit an <code>eventName</code> event.</p>


  <div class='pre p1 fill-light mt0'>event(emitter: EventEmitter, eventName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>emitter</span> <code class='quiet'>(EventEmitter)</code>
	    the object to listen on

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>eventName</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    the event to listen for

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>></code>:
        an array of the arguments passed to the 
<code>eventName</code>
 event

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">await</span> a.event(server, <span class="hljs-string">'listen'</span>)</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='callback'>
      callback
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L215-L222'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Calls a function <code>func</code> that takes arguments <code>args</code> and an <code>(err, result)</code> callback.
Waits for the callback result, throwing an Error if err is truthy.</p>


  <div class='pre p1 fill-light mt0'>callback(fn: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a>, args: ...<a href="#object">object</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fn</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a>)</code>
	    a function that takes a callback

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...<a href="#object">object</a>)</code>
	    arguments to pass to 
<code>fn</code>

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></code>:
        the result passed to the callback

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> a.callback(fs.readFile, <span class="hljs-string">'foo.txt'</span>)
<span class="hljs-built_in">console</span>.log(result)
<span class="hljs-comment">// =&gt; 'the text of the file'</span></pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='awaited'>
      awaited
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L237-L239'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Wraps a node style function (see <code>callback</code>) into a new function, which instead of taking a callback
function, returns an async function (<code>Promise</code>). This <code>Promise</code> resolves if the first (error) argument of the
callback was called with a falsy value, rejects with the error otherwise. Takes the rest of the
arguments as the original function <code>fn</code>.</p>


  <div class='pre p1 fill-light mt0'>awaited(fn: any): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fn</span> <code class='quiet'>(any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code>:
        

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
<span class="hljs-keyword">const</span> readFile = a.awaited(fs.readFile)
<span class="hljs-keyword">const</span> contents = <span class="hljs-keyword">await</span> readFile(<span class="hljs-string">'foo.txt'</span>, <span class="hljs-string">'utf-8'</span>)</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='single'>
      single
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L254-L257'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for the first Promise in <code>list</code> to resolve.</p>


  <div class='pre p1 fill-light mt0'>single(list: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>>, ignore: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>list</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>>)</code>
	    racing promises

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>ignore</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?
            = <code>0</code>)</code>
	    number of rejections to ignore

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></code>:
        

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> file = <span class="hljs-keyword">await</span> a.single([ fetch(remoteFile), read(localFile) ])</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='set'>
      set
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L277-L300'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for the first <code>count</code> Promises in <code>list</code> to resolve.</p>


  <div class='pre p1 fill-light mt0'>set(list: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>>, count: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?, ignore: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>list</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>>)</code>
	    racing promises

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>count</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?
            = <code>list.length</code>)</code>
	    number of promises to wait for

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>ignore</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?
            = <code>0</code>)</code>
	    number of rejections to ignore

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>></code>:
        

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> [ first, second ] = <span class="hljs-keyword">await</span> a.set([
  ping(<span class="hljs-string">'ns1.example.com'</span>),
  ping(<span class="hljs-string">'ns2.example.com'</span>),
  ping(<span class="hljs-string">'ns3.example.com'</span>),
  ping(<span class="hljs-string">'ns4.example.com'</span>)
], <span class="hljs-number">2</span>)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`fastest nameservers: <span class="hljs-subst">${first}</span>, <span class="hljs-subst">${second}</span>`</span>)</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='list'>
      list
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L316-L340'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for all Promises in <code>list</code> to resolve.</p>
<p>Like <code>Promise.all</code> with the option to ignore some (or all) rejections.</p>


  <div class='pre p1 fill-light mt0'>list(list: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>, ignore: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?= 0): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>list</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>)</code>
	    promises

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>ignore</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?= 0)</code>
	    rejections to ignore

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>></code>:
        promised results in order

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> a.list([ foo, bar, baz ])
<span class="hljs-built_in">console</span>.log(results.length)
<span class="hljs-comment">// =&gt; 3</span></pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='object'>
      object
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L358-L369'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for all Promises in the keys of <code>container</code> to resolve.</p>


  <div class='pre p1 fill-light mt0'>object(container: <a href="#object">object</a>, ignore: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?= 0): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>container</span> <code class='quiet'>(<a href="#object">object</a>)</code>
	    
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>ignore</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?= 0)</code>
	    rejections to ignore

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>></code>:
        a new object with keys mapped to the resolved values

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> a.object({
  <span class="hljs-attr">pictures</span>: getPictures(),
  <span class="hljs-attr">comments</span>: getComments(),
  <span class="hljs-attr">tweets</span>: getTweets()
})
<span class="hljs-built_in">console</span>.log(results.pictures, results.comments, results.tweets)</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='map'>
      map
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L386-L417'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Passes each item in <code>list</code> to the Promise-returning function <code>fn</code>,
running at most <code>concurrency</code> simultaneous promises.</p>
<p>For cases where starting all Promises simultaneously is infeasible,
such as making a large number of requests to a server with rate-limiting.</p>


  <div class='pre p1 fill-light mt0'>map(list: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>, concurrency: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, fn: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a>)</div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>list</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>)</code>
	    items to pass to each promise

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>concurrency</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    maximum concurrency

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fn</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a>)</code>
	    takes an item and returns a Promise

          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">// pull hundreds of pages from a site without getting blocked</span>
<span class="hljs-keyword">const</span> pages = <span class="hljs-keyword">await</span> a.map(urls, <span class="hljs-number">3</span>, fetch)</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='failure'>
      failure
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L432-L436'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for <code>promise</code> to reject, returning the Error object.
If <code>promise</code> resolves successfully, returns <code>undefined</code>.</p>


  <div class='pre p1 fill-light mt0'>failure(promise: any): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a>></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>promise</span> <code class='quiet'>(any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a>></code>:
        the Error object, or undefined

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>test(<span class="hljs-string">'throws "foo"'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> err = <span class="hljs-keyword">await</span> a.failure(shouldThrow())
  assert.equal(err.message, <span class="hljs-string">'foo'</span>)
})</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='success'>
      success
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L449-L453'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for the value of <code>promise</code>.
If <code>promise</code> throws an Error, returns <code>undefined</code>.</p>


  <div class='pre p1 fill-light mt0'>success(promise: any): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>promise</span> <code class='quiet'>(any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></code>:
        the result, or undefined

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> isNodeProject = <span class="hljs-keyword">await</span> a.success(a.callback(fs.access, packageJSON))
<span class="hljs-keyword">if</span> (isNodeProject) doSomething()</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='result'>
      result
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L467-L471'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Waits for <code>promise</code> to resolve or reject.
Returns either the resolved value, or the Error object.</p>


  <div class='pre p1 fill-light mt0'>result(promise: any): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></div>
  
  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>promise</span> <code class='quiet'>(any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a></code>:
        the result or error

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>$(<span class="hljs-string">"#ajax-loader-animation"</span>).show()
<span class="hljs-keyword">await</span> a.result(loadAjaxData())
$(<span class="hljs-string">"#ajax-loader-animation"</span>).hide();</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='throw'>
      throw
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L496-L500'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Provides a stack trace for unhandled rejections instead of the default message string.</p>
<p><code>throw</code> and <code>swallow</code> can be called multiple times but will only attach a single listener.</p>


  <div class='pre p1 fill-light mt0'>throw(): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>failingPromise()
<span class="hljs-comment">// =&gt; (node:6051) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 1): Error: fail</span></pre>
    
      
      <pre class='p1 overflow-auto round fill-light'>a.throw()
failingPromise()
<span class="hljs-comment">// =&gt; /Users/hloftis/code/awaiting/lib/awaiting.js:308</span>
<span class="hljs-comment">// =&gt; function throwOnRejection (err, promise) { throw err }</span>
<span class="hljs-comment">// =&gt;                                            ^</span>
<span class="hljs-comment">// =&gt; Error: fail</span>
<span class="hljs-comment">// =&gt;    at fail (/Users/hloftis/code/awaiting/test/fixtures/rejection-throw.js:7:9)</span>
<span class="hljs-comment">// =&gt;    at Object.&lt;anonymous&gt; (/Users/hloftis/code/awaiting/test/fixtures/rejection-throw.js:4:1)</span></pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='swallow'>
      swallow
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/hunterloftis/awaiting/blob/ead1d9f8cda94bfa2d1d6dff2052dd8573aaa134/lib/awaiting.js#L524-L528'>
      <span>lib/awaiting.js</span>
      </a>
    
  </div>
  

  <p>Silently swallows unhandled rejections.</p>
<p>This is an anti-pattern, but if you depend on a module that doesn't handle all of its rejections,
you'll get a lot of really annoying logs in current versions of node.
<code>swallow</code> will allow you to suppress them.</p>
<p><code>throw</code> and <code>swallow</code> can be called multiple times but will only attach a single listener.</p>


  <div class='pre p1 fill-light mt0'>swallow(): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>failingPromise()
<span class="hljs-comment">// =&gt; (node:6051) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 1): Error: fail</span></pre>
    
      
      <pre class='p1 overflow-auto round fill-light'>a.swallow()
failingPromise()
<span class="hljs-comment">// (no output)</span></pre>
    
  

  

  

  
</section>

          
        
      </div>
    </div>
  </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
